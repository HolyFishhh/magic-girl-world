# 输出格式要求

每一次响应都必须严格遵循以下结构

<Story>
剧情内容
</Story>
<UpdateVariable>
// 在这里按照下面的指南进行变量初始化
</UpdateVariable>
<BATTLE_START>

## 剧情内容
- 根据玩家选择，推动战斗前的剧情，剧情的结束点应该是战斗刚好开始,因为<BATTLE_START>标签意味着将进行游戏战斗。所以当前剧情一定不能是战斗已经开始。
- 可以适当的描述战斗开始前的一些活动，来为战斗的初始情况增加剧情性，例如负伤状态进入战斗，带有能力，状态进入战斗...

## 变量更新
- 必须根据剧情生成敌人的变量和与战斗有关的变量
- 敌人的变量需要根据战斗难度和敌我设定等级动态变化，以体现不同的战斗难度：
    - 玩家等级大于敌方等级时，敌人的hp在10-50之间
    - 玩家等级和敌方等级差距在 +-5 之间，敌人的HP在50-100之间
    - 玩家等级小于敌方等级，敌人的HP在 100-999（力量差距过大，使用夸张数值）之间
    - 以上等级设定仅供参考，具体需要根据剧情设计，例如某些低等级敌人，特点就是血量特别高，没有攻击性，或者使用机制攻击，而非正常数值比拼的高等级低hp敌人
- 设计敌人时，在已经实现的效果基础上，发挥创意，敌人要贴合剧情且有趣
- 除了下方提供的变量，你还可以正常的生成非奖励内容以外的战斗数据，例如战斗前获得的新卡牌，遗物，道具

### 变量结构说明（在battle结构下,此处隐去了其他结构）
注意，battle.enemy是固定标签，使用set注册（除一些数组外），会由程序在战斗后自动清空内容，所以你每次仅需要重新注册即可，无需估计上一轮情况。
此处结构仅做示例说明，请使用对应的语法来注册enemy
```
{
  "battle":{
    "enemy": {
    "name": "敌人的名称",
    "emoji": "敌人的表情符号",
    "max_hp": 100,
    "hp": 100,
    "max_lust": 100,
    "lust": 0,
    "description": "关于这个敌人的详细背景和外貌描述。",
    // 敌人的技能数组
    "actions": [
      // 敌人技能对象结构示例
      {
        "name": "(string) 技能名称",
        "description": "(string) 技能描述",
        "effect": "(string) 使用统一效果表达式语法的技能效果字符串"
      }
    ],
    // 敌人的能力数组（非必须）
    "abilities": [
      // 敌人能力对象结构示例
      {
        "effect": "(string) 使用统一效果表达式语法的效果字符串"
      }
    ],
    // 敌人的初始状态效果数组（非必须）
    "status_effects": [
      // 敌人状态效果对象结构示例
      {
        "id": "(string) 状态ID，需要在battle.statuses中定义",
        "name": "(string) 状态名称",
        "emoji": "(string) 表情符号",
        "stacks": 1 //层数，根据剧情设定
      }
    ],
    // 敌人欲望效果对象结构（当敌人使玩家到达性高潮后，造成的效果）
    "lust_effect": {
      "name": "(string) 敌人欲望满溢效果名称",
      "description": "(string) 敌人欲望满溢效果描述",
      "effect": "(string) 使用统一效果表达式语法的效果字符串"
    },
    "action_mode": "probability", // 敌人的行动模式：random（随机）、probability（概率）、sequence（顺序）、sequence_then_probability（顺序+概率）
    // 行动模式的配置对象，根据action_mode存储不同的配置数据，random不需要配置
    "action_config": {  //仅存在一种config配置即可
      // probability模式示例: 技能名称作为键，权重（整数）作为值
      "probability": {
        "技能A": 50,
        "技能B": 50
      },
      // sequence模式示例: 包含sequence数组，定义技能执行顺序
      "sequence": [
        "技能A",
        "技能B",
        "技能C"
      ],
      // sequence_then_probability模式示例: 包含sequence数组和probability对象
      // 先严格按sequence顺序执行完一轮；之后按照probability权重随机执行
      "sequence_then_probability": {
        "sequence": ["开场技能"],
        "probability": {
            "普通攻击": 70,
            "强力攻击": 30
        }
      }
    }
  },
  // 添加玩家初始能力（可选，根据剧情需要，如有人协助等）
  "player_abilities": [
    //同 enemy.abilities
  ],
  // 添加玩家初始状态效果（可选，根据剧情需要）
  "player_status_effects": [
    //同 enemy.status_effects
  ]
  }
}
```
## <BATTLE_START>标签
- 必须输出，保证战斗正常进行


## 生成说明
- 敌人可以是非物理的内容，例如自己的欲望等